<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TDSR UWB API: 1. Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TDSR UWB API
   &#160;<span id="projectnumber">2.1.2</span>
   </div>
   <div id="projectbrief">Software Release</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><ol type="1">
<li>Introduction </li>
</ol>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This manual describes the RangeNet 3.1.9 programmer’s interface between the user’s Host processor and the following members of the P400 series of single-board UltraWideband (UWB) platforms. As of this date, this includes the P441, P442 and C445. This document does not apply to the P400, P410, P412, or P440 members of the family. These later platforms are only supported under RangeNet 2.0. For the purposes of this document the P441, P442, and C445 will be referred to interchangeably as P4xx platforms.</p>
<p>The P4xx platforms use Two-Way Time-of-Flight (TW-TOF) ranging to accurately measure the distance between two units. TW-TOF distance measurements are referred to as ranges or range measurements. <br  />
</p>
<p></p>
<p><b>Fig. 1: Illustration of a P442 supplied with an optional plastic enclosure and Broadspec antenna.</b></p>
<p></p>
<p>The P4xx units can be operated as standalone devices, in that they do not need to be connected to a Host computer. In such cases, they will operate in whatever state they were last used.</p>
<p>The units can be operated as peer-to-peer ranging devices (Ranging Mode) or as part of the RangeNet network. RangeNet is Humatics’ networking protocol and is specifically designed to address the needs of TW-TOF. The networking capability is resident on the P4xx and supports either the TDMA or ALOHA protocols.</p>
<p>When operating in Network mode, the user has the option of engaging Humatics’ Location Engine. This localizer is resident on the P4xx and computes the current location of the P4xx using either a Geometric (Least Squares Fit) algorithm or a Kalman Filter with inter-unit TW-TOF range measurements. The Location Engine will report either 2D (XY) or 3D (XYZ) positions based on a user-defined setting. If the user has selected 2D positioning, then Z is assumed to be fixed and is user-definable. <br  />
</p>
<p>The Location Engine is intended to illustrate how UWB range measurement can be used to geolocate. While reasonably robust, there are many corner cases in which the Localization Engine is not robust. These corner cases deal with operation in complex environments or when units change their velocity or direction. If the units are moving slowly in open areas, then the Localization Engine will be reasonably robust.</p>
<p>Robustness of UWB location systems can be tremendously improved if the UWB range measurements are used in conjunction with other sensors, for example, accelerometers and wheel odometry. In these cases, the strengths of the individual sensor technologies cancel out the weakness of the other technologies yielding a fused system with excellent performance. However, the Location Engine supported by RangeNet does not support these other technologies. For more information on how this problem can be solved please contact Humatics directly at <a href="#" onclick="location.href='mai'+'lto:'+'sal'+'es'+'@hu'+'ma'+'tic'+'s.'+'com'; return false;">sales<span style="display: none;">.nosp@m.</span>@hum<span style="display: none;">.nosp@m.</span>atics<span style="display: none;">.nosp@m.</span>.com</a>.</p>
<p>A more detailed description of RangeNet network and localization operations will be presented later in this document. Additional information can be found in <b>Section 7 - Network Principles</b> and <b>Section 11 - Localization Principles</b> of the <em>430-00021 RangeNet User Guide</em>. The User Guide describes the operation of Humatics’ Host-based RangeNet Graphical User Interface (GUI). RangeNet is provided with the Ranging and Localization Kits and Labs. In particular, RangeNet enables the user to:</p>
<ul>
<li>Operate the P4xx in any of the various modes <br  />
</li>
<li>Modify settings, parameters, and configurations <br  />
</li>
<li>Display range information, captured waveform scans, network activity, and locations <br  />
</li>
<li>Log any information passed between the Host and a P4xx <br  />
</li>
</ul>
<p>In addition, RangeNet TDMA has been greatly improved to increase the system scalability. These are Advanced Network features are summarized in this section and described in detail in <em>430-00021 RangeNet User Guide</em>.</p>
<p>RangeNet is an excellent tool for learning how the system works, demonstrating P4xx capabilities to others, and measuring performance. This MS Windows PC application provides a graphical representation of the interface data structures and allows the user to quickly become familiar with Host and P4xx behaviors. RangeNet operates under Windows 10 on 64bit computers and is provided with a Quick Start Guide. The <em>430-00012 RangeNet Quick Start Guide</em> walks the user through initial set-up and demonstrates each mode of operation.</p>
<p>Programmers are strongly encouraged to review and make use of the sample C code provided with the software release. Doing so will accelerate your development efforts.</p>
<p>The most P4xx platforms support Ethernet, USB, Serial, CAN, and SPI. For specific differences please review the relevant data sheet. A separate application note, <em>430-00005 Using the USB and Serial Interfaces</em>, describes the extended header bytes and protocol required to support the USB and 3.3V TTL Serial UART interfaces. This document provides a reference of the message structures and bit patterns in an Ethernet UDP/IP programming interface. Interfacing with CAN is described in document <em>430-00015 CAN Interface Application Note</em>. The SPI interface is described in the relevant P4xx data sheet.</p>
<p>Additionally, RangeNet also allows the user to control and monitor the GPIOs associated with P44x devices.</p>
<h1><a class="anchor" id="mainpagesubsection1"></a>
Usage Notes: Interface and Ranging</h1>
<p>This section provides a short overview of key facts relative to P4xx interfaces and behaviors.</p>
<p>Interfacing with USB or Serial is trivial. One just connects the Host to the P4xx with a Micro-USB cable and connection will be established. Connecting via Serial is similarly easy, the specific connection is described in the relevant P4xx data sheet.</p>
<p>Interface with Ethernet is more involved because one must assure that the Host PC’s TCP/IP and Subnet mask are configured properly. For details on connecting with Ethernet, refer to the <em>430-00021 RangeNet User Guide</em>, <b>Appendix A: Connecting with Ethernet</b> and <b>Section 3.1 - Connecting with Ethernet.</b></p>
<p>Upon power-up, with or without a Host connection, the P4xx will operate in accordance with the last saved configuration. If the last saved configuration was Ranging Mode, then the P4xx will automatically respond to a “range request” packet with its Node ID as the range target. If the last saved configuration was either of the Networking Modes, then it will still respond to a range requests but it will also initiate range requests and/or send data packets as defined by the RangeNet configuration settings. The factory default is Ranging Mode. <br  />
</p>
<p>P4xx devices operating in Ranging Mode will not initiate a range request unless ordered to do so by their respective Hosts. In Ranging Mode, there is no mechanism built into the P4xx to coordinate transmissions other than automatic response to targeted range requests. In Network Mode, the P4xx controls transmissions based on parameters set by the Host through the API. In Localization Mode the P4xx will determine its location based on range measurements taken between it and other nodes in the system.</p>
<p>The P4xx measures distance through a Two-Way Time of Flight (TW-TOF) radio frequency (RF) ranging technique. If the antennas are altered or extra SMA cables are introduced, then the range measurement will exhibit a bias based on the longer TOF of the RF pulse. This bias can be calibrated and removed by the radio firmware using the Calibration Tab of the RangeNet GUI. The calibration procedure can be found in the <em>430-00021 RangeNet User Guide</em>.</p>
<h1><a class="anchor" id="mainpagesubsection2"></a>
RangeNet</h1>
<p>This section discusses RangeNet terms, operation and network modes.</p>
<h2><a class="anchor" id="mainpagesubsection3"></a>
RangeNet Terms</h2>
<p>Definitions of the terms used by RangeNet.</p>
<ul>
<li>Requestor <br  />
<ul>
<li>A P4xx who initiates a ranging measurement. <br  />
</li>
</ul>
</li>
<li>Responder <br  />
<ul>
<li>A P4xx who responds to a range measurement request. <br  />
</li>
</ul>
</li>
<li>RangeNet Node <br  />
<ul>
<li>A P4xx operating in RangeNet Networking Mode. <br  />
</li>
</ul>
</li>
<li>Target <br  />
<ul>
<li>The object of a RangeNet Node’s range request. <br  />
</li>
</ul>
</li>
<li>Neighbor <br  />
<ul>
<li>When in Network Mode, this is any P4xx node that the local RangeNet Node can hear. <br  />
</li>
</ul>
</li>
<li>Neighbor Database (NDB) <br  />
<ul>
<li>A database which contains the Node IDs and associated range information of every node that the P4xx has heard in the recent past. “Recent” is a user programable amount of time. If a neighbor has not been heard in this about of time, it will age out of the system and will be dropped from the NDB. <br  />
</li>
</ul>
</li>
<li>Beacons <br  />
<ul>
<li>RangeNet Nodes which will respond to range requests but which will not initiate a range request. They will periodically transmit a beacon message at a rate configured by the user or if they have not recently responded. This process is used to inform neighbors of their presence. <br  />
</li>
</ul>
</li>
<li>Anchor (also called a Reference or a Beacon) <br  />
<ul>
<li>These nodes are normally located at fixed points and are used in localization as reference points from which other units can compute their own locations. In Location Mode, an Anchor operates as a Beacon. <br  />
</li>
</ul>
</li>
<li>Aging Out <br  />
<ul>
<li>If a node has not heard from a Neighbor in a preconfigured amount of time, then the Neighbor will be deleted from the node’s Neighbor Database. (“Not heard from” implies the node has received neither a range response nor a beacon packet recently.)</li>
</ul>
</li>
<li>Slot Map <br  />
<ul>
<li>The Slot Map is a construct which defines (1) the exact time when units are allowed to initiate conversations, (2) which units they are communicating with, and (3) the defining parameters (PII, code channel, data bits, etc.) for those communications. The <em>430-00021 RangeNet User Guide</em> provides an excellent visual description of the Slot Map. <br  />
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="mainpagesubsection4"></a>
RangeNet Overview</h2>
<p>The User controls and monitors the operation of the P4xx thought the API.</p>
<p>Any message sent by the Host to the P4xx will cause the P4xx to transmit a confirmation message. If the message is not recognized, then an error message will be sent by the P4xx.</p>
<p>The P4xx will also source messages. For example, it will send to the Host a message whenever range completes, a waveform scan is generated, data is received or localization information if generated.</p>
<p>All commands are defined in Section 2.</p>
<p>The P4xx does not need to be connected to a Host in order to operate. For example, when in Ranging Mode, the P4xx will respond to any message it receives and will source messages as required even if no Host is connected.</p>
<p>If connected to a Host PC or microcontroller, then all information is sent to the Host. The user can also define a default communication port over which the information will be reported when the Host is not connected. This is useful on boot-up of the Host or when the system is recovering from a power failure (the user can also select “none” as the default). In any event, once the Host has successfully connected with the P4xx then all information will be reported over the communications port through which the Host connected. For example, if the User set the default communications port to serial and then connected with a Host through USB,then the P4xx would initially send information through the serial connection and then switch to USB when the connection was made.</p>
<p>Network range request and response packets have a slightly different internal data format than standard Ranging range and response packets.</p>
<p>Network Nodes announce their presence by sending RangeNet requests or by transmitting data packets (also known as Beacon packets). Targets of the range requests are chosen from the Neighbor Database. In ALOHA, targets will be identified and ranged to on a round-robin basis. In TDMA, units will be ranged to as defined by the Slot Map. If no neighbor Node IDs are known, as when first starting up or if this RangeNet node has been out of contact with the rest of the network for a while, a short beacon packet is transmitted.</p>
<p>The ALOHA protocol support the discovery of new nodes and the exit of existing nodes. The TDMA network has mechanisms which will allow the Host to manage the discovery and exit of existing nodes.</p>
<h2><a class="anchor" id="mainpagesubsection5"></a>
RangeNet Network Modes (ALOHA and TDMA)</h2>
<p><b>ALOHA Network Protocol:</b> In this concept of operation, network nodes do not own any specific time slot. Instead they transmit range requests at random times between user-configurable minimum and maximum intervals. Setting these minimum and maximum times is described in <b>Section 6.1, Selecting ALOHA Min and Max Intervals</b>. RangeNet also supports Automatic Congestion Control (ACC). When this mode is selected, the minimum and maximum intervals will be overridden and the ACC algorithm will operate the network as fast as possible. Furthermore, RangeNet will throttle this rate as the number of nodes in the network increase or decrease. For more information on how the network can be best operated manually or automatically, see the white paper <em>430-00014 RangeNet/ALOHA Guide to Optimal Performance</em>. <br  />
</p>
<p>All modes support a Virtual Carrier Sense feature, which prevents sending a range request when it is known that another P4xx (whether in standard Ranging or RangeNet Mode) is responding to a range request. This avoids knowingly interfering with an ongoing range conversation.</p>
<p>The ALOHA protocol as implemented in RangeNet has an additional benefit in that the network will behave as a Slotted ALOHA system. This is advantageous because the capacity of a Slotted ALOHA system is twice the capacity of a Pure ALOHA system (36% vs. 18%).</p>
<p><b>Basics of TDMA (Time Division Multiple Access) Network Protocol:</b> In this concept of operation, the network nodes <em>do</em> own a specific time slot. The time at which they can transmit, the radios they communicate with, the duration of the transmission, the order in which they transmit, and the parameters associated with the range conversation or data transmission are all predefined by the user. This definition is captured as a Slot Map.</p>
<p>The transmitter in the first slot (Slot #0) maintains the master clock. All units in the system will synchronize to this transmitter. If this transmitter should lose power or otherwise exit the system, then once the departure has been recognized, all units in the system will stop transmitting and the system will halt. The amount of time between actual departure and recognition of departure is normally on the order of seconds. This time is defined by the user as “Max Neighbor Age” and the default value for this is 10 seconds. The user can select different values but should take care not to make the value “too large.” During the time between exit and Max Neighbor Age, the network will continue to function for as long as the clocks in the radios are reasonably synchronized. Because each unit has a high precision oscillator, the system will operate for at least 10 and maybe many more seconds. For example, setting the Max Neighbor Age to a very high value, like 10,000 seconds, is asking for trouble. With such a setting, the network will sink into chaos when the oscillators finally lose synchronization.</p>
<p>Different units may have different Slot Maps but all units need to have cooperative and consistent Slot Maps. In other words, all slots in all Slot Maps must have equal duration and be arranged so there no conflict. The user not only can define a Slot Map, but it is also the user’s responsibility to ensure that the Slot Map is organized such that there is no possibility for conflicting messages.</p>
<p>The user can also channelize the network by adding a CDMA layer to the Slot Map. For example, the user could define that in time slot 2, Units 1 and 2 could communicate on code channel 1 and Units 3 and 4 could communicate on code channel 2. However, having all 4 units communicate in the same slot on the same channel, or requiring one unit to range to more than one unit, or other such nonsense is incompatible with a well-functioning network and will cause conflict.</p>
<p>Once the Slot Map has been defined, there is no automatic mechanism for allowing new units to be added to the system. However, a higher-level protocol could allow the Host to monitor the network and redefine the Slot Map on the fly such that new units could be added. However, this Host-based code would be the responsibility of the user to develop.</p>
<p>Where ALOHA handles conflict automatically based on infrequent and random transmissions as well as retransmissions, TDMA systems require that the user predefine an operating order such that conflict is avoided. While ALOHA is easier to operate (especially in complex environments) it is less efficient and has lower throughput. A TDMA network operating on one channel has more than three times the capacity of an ALOHA system but is more complex to setup and maintain.</p>
<p>When operating in TDMA mode, the Range Target List capability allows the user to dynamically and asynchronously search for other units in the system without requiring the user to halt the network, change the slotmap settings and restart the system. This capability is described in detail in <b>Section 8.8 Range Target List (RTL)</b> of <em>430-00021 RangeNet User Guide</em>.</p>
<p><b>Advanced TDMA Network Features:</b> TDMA operation as previously described, has several limitations. While it works well in small system, it suffers when it is applied to large systems. When operating in large systems it becomes difficult to define or change the Slotmaps, discover new networks, or operate with a single master clock. These limitations are particularly important in factory applications where, for example, an AGV needs to move through a large network of fixed beacons and negotiate with other AGVs for airtime in which to generate range requests.</p>
<p>The advanced features have been implemented to address these issues and thereby increase system scalability, robustness, and ease of configuration. In particular, the Advanced Features allow the user to create a Mobile Ad Hoc Network in which mobile units can:</p><ul>
<li>negotiate with each other for airtime</li>
<li>exit one part of the network and join other parts</li>
<li>discover fixed references which were not previously in the field of view, and</li>
<li>operate with redundant clock masters. These functions are accomplished with a simple slot map which is easy to define and need not be changed. These capabilities are described in detail in <em>430-00021 RangeNet User Guide</em>.</li>
</ul>
<h2><a class="anchor" id="mainpagesubsection6"></a>
Localization Modes</h2>
<p>Localization is resident in the P4xx and is implemented as an additional layer to the RangeNet network. It is supported by either the ALOHA or TDMA network protocols. It is capable of handling systems consisting of up to 60 nodes.</p>
<p>The Location Engine combines the following elements to compute the P4xx’s location: <br  />
</p>
<ul>
<li>Information on the location of the Anchors <br  />
</li>
<li>Range measurements from the P4xx to the Anchors <br  />
</li>
<li>A Kalman Filter <br  />
</li>
<li>A motion model <br  />
</li>
<li>A calculation of the Geometric Dilution of Precision (GDOP) <br  />
</li>
<li>Various other tuning parameters <br  />
</li>
</ul>
<p>Locations are reported in the X, Y, and Z dimensions. Localization can be operated either in 2D (in which case Z is assumed to be fixed at a user selectable height) or in 3D. In addition, the Location Engine also reports the Variance and Covariance values associated with the range calculation.</p>
<p>The Location layer takes advantage of the UWB network to transfer configuration and location information throughout the network. Because of this, the user can connect to any node and monitor or control every unit in the system.</p>
<p>Configuration information is largely captured in the Location Map, or LMAP. This construct contains:</p>
<ul>
<li>A list of all nodes active in the system and whether they are Anchors or Mobiles <br  />
</li>
<li>The rate at which nodes will beacon or range <br  />
</li>
<li>Instructions as to whether or not they will transmit ELR (Echo Last Range) and ELL (Echo Last Location) information as data when they issue range requests <br  />
</li>
<li>Location (in X, Y, Z dimensions) of all Anchors</li>
</ul>
<p>The Location Engine will drive the network, so there is little need for the user to deal with the various network mode commands. The Location Engine can operate using the communications channel, antenna definition, transmit power, and Pulse Integration Index (PII) defined through the SET_CONFIG_REQUEST message. In this case it will create its own Slot Map. This is ideal for simple demonstrations. If there is a need for a more complicated operation, then the user has the option of creating specific Slotmaps for the user.</p>
<p>Since the Location Engine is resident in the P4xx, the Host computer’s processing load is significantly reduced. In fact, the role of the Host processor is largely limited to:</p>
<ul>
<li>Providing configuration information <br  />
</li>
<li>Commanding the system to transition from one mode to another <br  />
</li>
<li>Serving as a port to which the connected P4xx will provide a torrent of location information for all units in the system</li>
</ul>
<p>Be advised that it is surprisingly easy to underestimate how much data can be sent by the P4xx. For example, if the user requests that all location, ranging, and scan data be reported, then the P4xx can easily overwhelm the capacity of the Host computer to handle the volume of messages that are sent.</p>
<p>The nodes behave in the following manner.</p>
<p>Anchor P4xxs are fixed in location and have only two functions:</p>
<ul>
<li>Anchors occasionally send Beacon messages to announce their presence. This behavior acts as a seed to start communications between units in the ALOHA network.</li>
<li>Anchors can, if directed by the user, report any range or location information which it may have received from a Mobile to a Host computer.</li>
</ul>
<p>Mobile P4xx units, as the name suggests, do not have a fixed location but rather move either continuously or intermittently. They have four functions:</p>
<ul>
<li>Mobiles will issue range requests to any Anchor whose Beacon message they might hear. <br  />
</li>
<li>During initialization, once a Mobile has ranged to a sufficient number of Beacons, it will compute its location using the Non-linear Least Squares (NLS) or Geometric solver. Once the Mobile’s position is initialized with the NLS solver, the Mobile will, at the user’s option, either continue using the Geometric solver or use the Kalman solver. Positions are reported after each subsequent successful range measurement. <br  />
</li>
<li>As part of each range request message a Mobile transmits it will, if directed by the user, also transmit as data their last calculated location. <br  />
</li>
<li>Mobiles can, if directed by the user, report any range and/or location information which it may have received to a Host computer.</li>
</ul>
<p>Localization has three operational modes: Idle, Autosurvey, and Tracking.</p>
<p>While in the Idle Mode, the X, Y, and Z locations of the Anchors and the Z location of the Mobiles (as well as other configuration information) can be broadcast to the other units in the network. This broadcast uses a flooding algorithm to distribute the information. The algorithm incorporates acknowledgements, so it is easy to confirm that all units in the system have received the messages.</p>
<p>Once this information has been distributed, the system can be transitioned to Tracking Mode. In this mode, the location of Mobiles will be calculated, and that information distributed through the network as configured by the user.</p>
<p>Autosurvey is an optional mode. When engaged, it will direct the Anchors to range to each other while the Mobiles stay idle. The resultant information will flow back to the Host. It will then be the responsibility of the Host to decide when enough information has been collected and to load this information into the LMAP.</p>
<p>If Autosurvey is not used, then it is the user’s responsibility to build the LMAP and provide surveyed locations for the fixed reference units.</p>
<p>Humatics’ RangeNet GUI is an excellent tool for illustrating operation of ranging, networking, and location. Exercising the GUI will provide the user with insight into how the API commands are used and how the system works. For that reason, we strongly recommend that the user begin any development program by first mastering the RangeNet GUI. Mastery can be accomplished in a few days, perhaps weeks, and will greatly reduce the time understanding how the API works.</p>
<p>If properly set up and operated in a benign environment, the system will provide location accuracy of the Mobiles on the order of a few centimeters. In some ideal cases, accuracies of 1 or 2 millimeters have been achieved. Guidance on how to achieve the best accuracy possible is provided in <b>Appendix F: Maximizing Location Performance</b> of the <em>430-00021 RangeNet User Guide</em>.</p>
<h1><a class="anchor" id="mainpagesubsection7"></a>
Ranging, RangeNet, and Localization Configuration Control</h1>
<p>There are three types of configuration data: (1) information relating to individual transmissions (such as integration rate, transmit power, communications channel, antenna selection, etc.) (2) information relating to the network operation (such as polling frequency, node status, etc.) and (3) information relating to localization. The first type of configuration data is set with the RCM configuration command (RCM_SET_CONFIG_REQUEST), the second with the RangeNet configuration command (RN_SET_CONFIG_REQUEST) and the third with Location configuration command LOC_SET_CONFIG_REQUEST) Configurations can be changed dynamically without having to stop or reboot the radio.</p>
<p>Setting either the Ranging or RangeNet parameters will result in RangeNet resetting statistics and the Neighbor Database.</p>
<h1><a class="anchor" id="mainpagesubsection8"></a>
Sending and Receiving Data</h1>
<p>Data can be transmitted as a simple data packet in any mode. Such data is sent using the RCM_SEND_DATA_REQUEST. Data received will be sent from the P4xx to the Host using the RCM_DATA_INFO packet.</p>
<p>However, data can also be sent as part of a range request or response. In Ranging Mode, the user has two options. Data can be sent as part of the range request using the RCM_SEND_RANGE_REQUEST command or the Host can transfer a specific message whenever it responds to a range request. The latter is accomplished by loading the response buffer using the RCM_SET_RESPONSE_DATA_REQUEST command.</p>
<p>When operating in RangeNet Mode, the P4xx is responsible for scheduling when and to which unit a range request will be sent. The Host always has the option of transmitting RCM data packets, but the Host can also preload the transmit and receive buffers with data using the RN_SET_REQUEST_DATA and RN_SET_RESPONSE_DATA commands. This enables the Host to send small amounts of data automatically. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
